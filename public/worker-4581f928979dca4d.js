self.addEventListener("push",function(n){if(n.data)try{let t=n.data.json(),i={body:t.body||"You have new activity in Momentum OS.",icon:t.icon||"/icon-192x192.png",badge:t.badge||"/icon-192x192.png",vibrate:[200,100,200,100,200,100,200],data:{url:t.url||"/"}};n.waitUntil(self.registration.showNotification(t.title||"Momentum OS",i))}catch(n){console.error("Error parsing push data",n)}}),self.addEventListener("notificationclick",function(n){n.notification.close(),n.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){let i=new URL(n.notification.data.url,self.location.origin).href;for(let n=0;n<t.length;n++){let e=t[n];if(e.url===i&&"focus"in e)return e.focus()}if(clients.openWindow)return clients.openWindow(i)}))});